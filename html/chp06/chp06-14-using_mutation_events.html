<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width initial-scale=1.0">
  <link rel="stylesheet" href="../../css/chp06-01.css">
  <title>Using Mutation Events</title>
</head>
<body>
    <a class="button-link" href="chp06-main.html">Chapter 6: Events</a>
    <div id="page">
      <h1 id="header">List King</h1>
      <h2>Buy groceries <span id="counter"></span></h2>
      <ul id="list">
        <li>fresh figs</li>
      </ul>
      <div class="button">
        <a href="#" class="addChp06-14">Add list item</a>
      </div>
    </div>
    <!-- Display HTML to viewer to review -->
    <a class="button-link button-link-js" data-popup="#popup-1" href="javascript:void(0)">Show HTML</a>
    <!-- display on button click event -->
    <div class="js-popup" id="popup-1">
                                    <pre>
&lt;div id="page"&gt;  <span class="color-green">// background container</span>
    &lt;h1 id='header'&gt;List King&lt;/h1&gt;  <span class="color-green">// header image</span>
    &lt;h2&gt;Buy Groceries <&lt;span id="counter"&gt;&lt;/h2&gt;
    &lt;ul id="list"&gt;
        &lt;li&gt;fresh figs&lt;/li&gt;
    &lt;/ul&gt;
    &lt;div class="button"&gt;
        &lt;a href="#" class="addChp06-14"&gt;Add list item&lt;/a&gt;
    &lt;/div&gt;
&lt;/div&gt;
                                    </pre>
    </div>
    <!-- Display JavaScript to viewer to review -->
    <a class="button-link button-link-js-2" data-popup="#popup-2" href="javascript:void(0)">Show JavaScript</a>
    <!-- display on button click event -->
    <div class="js-popup" id="popup-2">
                                <pre>
<span class="color-green">// Using Mutation Events</span>

var elList, addLink, newEl, newText, counter, listItems; <span class="color-green">// declare variables</span>

elList = document.getElementById('list'); <span class="color-green">// get list</span>
addLink = document.querySelector('.addChp06-14'); <span class="color-green">// get add item button</span>
counter = document.getElementById('counter'); <span class="color-green">// get item counter</span>

function addItem(e) {  <span class="color-green">// declare function</span>
    e.preventDefault();  <span class="color-green">// prevent link action</span>
    newEl = document.createElement("li");  <span class="color-green">// new &lt;li&gt; element</span>
    newText = document.createTextNode('New list item');  <span class="color-green">// new text node</span>
    newEl.appendChild('newText'); <span class="color-green">// add text to &lt;li&gt;</span>
    elList.appendChild('newEl'); <span class="color-green">// add &lt;li&gt; to list</span>
    updateCount(); <span class="color-green">// added to get counter updated because DOMNodeInserted is deprecated</span>
}

function updateCount() {  <span class="color-green">// declare function</span>
    listItems = list.getElementsByTagName('li').length;  <span class="color-green">// get total of &lt;li&gt;s</span>
    counter.innerHTML = listItems;  <span class="color-green">// update counter</span>
}

addLink.addEventListener('click', addItem, false);  <span class="color-green">// click on button</span>
elList.addEventListener('DOMNodeInserted', updateCount, false);  <span class="color-green">// DOM updated</span>

updateCount(); <span class="color-green">// initial count</span>

                                    </pre>
    </div>

    <script src="../../JavaScript/popup-html-js-code.js"></script>
    <script src="../../JavaScript/chp06/chp06-14.js"></script>

</body>
</html>